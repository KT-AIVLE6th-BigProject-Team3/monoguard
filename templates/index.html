<!DOCTYPE html>
<html lang="en">

<head>
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta
          name="viewport"
          content="width=device-width, initial-scale=1, shrink-to-fit=no"
        />
        <meta name="description" content="QnA" />
        <meta name="author" content="황은비" />
        <meta
          http-equiv="Cache-Control"
          content="no-cache, no-store, must-revalidate"
        />
        <meta http-equiv="Pragma" content="no-cache" />
        <meta http-equiv="Expires" content="0" />
    <title>MonoGuard</title>

    <!-- 외부 CSS 및 아이콘 폰트 -->
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css"
    />
    <link rel="stylesheet" href="/static/css/prj.css">
    <link rel="icon" href="/static/img/fabicon.svg" />
</head>

<!-- <body id="page-top" onload="fetchHome()"> -->
<body id="page-top">
    <!-- Page Wrapper -->
    <div id="wrapper">
        <!-- 메뉴 영역 (사이드바) -->
      <div id="menu"></div>

      <!-- 메인 콘텐츠 영역 -->
      <div id="content-wrapper" class="d-flex flex-column">
        <div id="content">
          <!-- 상단바 영역 -->
          <div id="topbar"></div>

          <!-- 페이지 콘텐츠 -->
          <div class="container-fluid">
            <!-- 페이지 제목 -->
            <div
              class="d-sm-flex align-items-center justify-content-between mb-3"
            >
              <h1 class="h3 mb-0 text-gray-800">대시보드</h1>
            </div>

            <!-- 탭 버튼 영역 -->
            <div class="tab-buttons">
              <div class="slider-container">
                <button class="tab-btn active" onclick="showTab('avg')">
                  AGV
                </button>
                <button class="tab-btn" onclick="showTab('oht')">OHT</button>
                <div class="slider"></div>
              </div>
            </div>

            <!-- AVG 탭 콘텐츠 -->
            <div id="avg-tab" class="tab-content active">
              <!--상단 요약카드-->
              <div class="row">
                <!--정상가동-->
                <div class="col-xl-3 col-md-6 mb-4">
                  <div class="card border-left-success shadow h-100 py-2">
                    <div class="small-card-body">
                      <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                          <div
                            class="text-xs font-weight-bold text-success text-uppercase mb-1"
                          >
                            정상기기
                          </div>
                          <div class="h5 mb-0 font-weight-bold text-gray-900">
                            12대
                          </div>
                        </div>
                        <div class="col-auto"> 
                          <i
                            class="fa-solid fa-circle-check fa-2x text-gray-300"
                          ></i>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- 관심 필요 -->
                <div class="col-xl-3 col-md-6 mb-4">
                  <div class="card border-left-caution shadow h-100 py-2">
                    <div class="small-card-body">
                      <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                          <div
                            class="text-xs font-weight-bold text-caution text-uppercase mb-1"
                          >
                            관심기기
                          </div>
                          <div class="h5 mb-0 font-weight-bold text-gray-900">
                            3대
                          </div>
                        </div>
                        <div class="col-auto">
                          <i
                            class="fas fa-exclamation-circle fa-2x text-gray-300"
                          ></i>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <!--경고-->
                <div class="col-xl-3 col-md-6 mb-4">
                  <div class="card border-left-warning shadow h-100 py-2">
                    <div class="small-card-body">
                      <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                          <div
                            class="text-xs font-weight-bold text-warning text-uppercase mb-1"
                          >
                            경고기기
                          </div>
                          <div class="row no-gutters align-items-center">
                            <div class="col-auto">
                              <div
                                class="h5 mb-0 mr-3 font-weight-bold text-gray-900"
                              >
                                4대
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="col-auto">
                          <i
                            class="fas fa-exclamation-triangle fa-2x text-gray-300"
                          ></i>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <!--위험-->
                <div class="col-xl-3 col-md-6 mb-4">
                  <div class="card border-left-danger shadow h-100 py-2">
                    <div class="small-card-body">
                      <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                          <div
                            class="text-xs font-weight-bold text-danger text-uppercase mb-1"
                          >
                            위험기기
                          </div>
                          <div class="h5 mb-0 font-weight-bold text-gray-900">
                            18대
                          </div>
                        </div>
                        <div class="siren-icon text-gray-300">
                          <img src="/static/img/siren.svg" alt="siren" />
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <!-- AVG 콘텐츠 -->
              <div class="row">
                <!-- 좌측 콘텐츠 -->
                <div class="col-lg-7 mb-3">
                  <!-- 1. 상태분포 -->
                  <div class="card shadow mb-3">
                    <div class="card-header py-3">
                      <h6 class="m-0 font-weight-bold text-primary">
                        상태분포
                      </h6>
                    </div>
                    <div class="agv-env-card-body">
                      <iframe
                        src="http://localhost:8501"
                        width="100%"
                        height="110"
                        frameborder="0"
                      ></iframe>
                    </div>
                  </div>
                  <!-- 2. 주의 및 위험 장비-->
                  <div class="card shadow mb-3">
                    <div class="card-header py-3">
                      <h6 class="m-0 font-weight-bold text-primary">
                        시간에 따른 장비 상태
                      </h6>
                    </div>
                    <div class="agv-env-card-body">
                      <iframe
                        src="http://localhost:8501"
                        width="100%"
                        height="315"
                        frameborder="0"
                      ></iframe>
                    </div>
                  </div>
                  <!-- 주의 및 위험 장비 -->
                  <div class="card shadow mb-3">
                    <div class="card-header py-3">
                      <h6 class="m-0 font-weight-bold text-primary">
                        주의 및 위험 장비
                      </h6>
                    </div>
                    <div class="agv-env-card-body">
                      <iframe
                        src="http://localhost:8501"
                        width="100%"
                        height="315"
                        frameborder="0"
                      ></iframe>
                    </div>
                  </div>
                  <!-- 장비설비 현황 -->
                  <div class="card shadow mb-3">
                    <div class="card-header py-3">
                      <h6 class="m-0 font-weight-bold text-primary">
                        장비설비 현황
                      </h6>
                    </div>
                    <div class="agv-env-card-body">
                      <iframe
                        src="http://localhost:8501"
                        width="100%"
                        height="315"
                        frameborder="0"
                      ></iframe>
                    </div>
                  </div>
                </div>

                <!-- 우측 콘텐츠 -->
                <div class="col-lg-5 mb-3">
                  <!-- 1. 기기 현황 -->
                  <div class="card shadow mb-3">
                    <div class="card-header py-3">
                      <h6 class="m-0 font-weight-bold text-primary">
                        최근 작업 환경
                      </h6>
                    </div>
                    <div class="agv-env-card-body">
                      <iframe
                        src="http://localhost:8501"
                        width="100%"
                        height="110"
                        frameborder="0"
                      ></iframe>
                    </div>
                  </div>
                  <!--2. 작업현장 온도 변화 -->
                  <div class="card shadow mb-3">
                    <div class="card-header py-3">
                      <h6 class="m-0 font-weight-bold text-primary">
                        작업현장 온도 변화
                      </h6>
                    </div>
                    <div class="agv-env-card-body">
                      <iframe
                        src="http://localhost:8501"
                        width="100%"
                        height="315"
                        frameborder="0"
                      ></iframe>
                    </div>
                  </div>
                  <!-- 작업현장 습도 변화 -->
                  <div class="card shadow mb-3">
                    <div class="card-header py-3">
                      <h6 class="m-0 font-weight-bold text-primary">
                        작업현장 습도 변화
                      </h6>
                    </div>
                    <div class="agv-env-card-body">
                      <iframe
                        src="http://localhost:8501"
                        width="100%"
                        height="315"
                        frameborder="0"
                      ></iframe>
                    </div>
                  </div>
                  <!-- 작업현장 조도 변화 -->
                  <div class="card shadow mb-3">
                    <div class="card-header py-3">
                      <h6 class="m-0 font-weight-bold text-primary">
                        작업현장 조도 변화
                      </h6>
                    </div>
                    <div class="agv-env-card-body">
                      <iframe
                        src="http://localhost:8501"
                        width="100%"
                        height="315"
                        frameborder="0"
                      ></iframe>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- OHT 탭 콘텐츠 -->
            <div id="oht-tab" class="tab-content">
              <!-- OHT 콘텐츠 -->
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 탭 전환을 위한 JavaScript -->

    <script src="/static/js/mainfunc.js"></script>
    <script>
      // 탭 전환 함수
      function showTab(tabName) {
        // 모든 탭 콘텐츠 숨기기
        const tabContents = document.querySelectorAll(".tab-content");
        tabContents.forEach((content) => {
          content.classList.remove("active");
        });

        // 모든 탭 버튼 비활성화
        const tabButtons = document.querySelectorAll(".tab-btn");
        tabButtons.forEach((btn) => {
          btn.classList.remove("active");
        });

        // 선택된 탭 활성화
        const selectedTab = document.getElementById(tabName + "-tab");
        const selectedButton = document.querySelector(
          `button[onclick="showTab('${tabName}')"]`
        );

        if (selectedTab && selectedButton) {
          selectedTab.classList.add("active");
          selectedButton.classList.add("active");

          // 슬라이더 이동
          const slider = document.querySelector(".slider");
          if (slider) {
            const buttonRect = selectedButton.getBoundingClientRect();
            const containerRect = document
              .querySelector(".slider-container")
              .getBoundingClientRect();
            const leftOffset = buttonRect.left - containerRect.left;
            slider.style.width = buttonRect.width + "px";
            slider.style.transform = `translateX(${leftOffset}px)`;
          }
        }
      }

      // 페이지 로드 시 초기 슬라이더 위치 설정
      document.addEventListener("DOMContentLoaded", () => {
        const firstButton = document.querySelector(".tab-btn");
        if (firstButton) {
          const slider = document.querySelector(".slider");
          if (slider) {
            slider.style.width = firstButton.offsetWidth + "px";
          }
        }
        // 초기 탭 설정
        showTab("avg");
      });
    </script>
</body>
</html>