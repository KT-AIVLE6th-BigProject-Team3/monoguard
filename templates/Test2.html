<!DOCTYPE html>
<html>
<head>
   <title>장비 모니터링</title>
   <style>
       .status-badge {
           display: inline-block;
           padding: 8px 16px;
           border-radius: 20px;
           font-weight: bold;
           color: white;
           text-align: center;
           width: 100px;
       }
       .status-normal { background-color: #4CAF50; }
       .status-caution { background-color: #FF9800; }
       .status-warning { background-color: #FF5722; }
       .status-danger { background-color: #F44336; }
       
       .equipment-item {
           cursor: pointer;
           padding: 10px;
           margin: 5px;
           border: 1px solid #ddd;
       }
       .equipment-item:hover {
           background-color: #f5f5f5;
       }
   </style>
</head>
<body>
   <h1>장비 모니터링</h1>
   
   <div id="equipment-list">
       <div class="equipment-item" data-id="AGV12">AGV12</div>
       <div class="equipment-item" data-id="AGV13">AGV13</div>
       <div class="equipment-item" data-id="AGV14">AGV14</div>
       <div class="equipment-item" data-id="AGV15">AGV15</div>
       <div class="equipment-item" data-id="AGV16">AGV16</div>
   </div>
 
   <div id="status-display"></div>
 
   <script>
       document.querySelectorAll(".equipment-item").forEach(item => {
           item.addEventListener("click", function() {
               const deviceId = this.dataset.id;
               fetch(`http://localhost:8000/device_status/${deviceId}`)
                   .then(response => response.json())
                   .then(data => {
                       const statusDisplay = document.getElementById("status-display");
                       statusDisplay.innerHTML = `
                           <h2>${deviceId} 상태</h2>
                           <div class="status-badge ${getStatusClass(data.current_status)}">
                               ${data.current_status}
                           </div>
                           <div>
                               <p>정상: ${data.ratios.normal.toFixed(1)}%</p>
                               <p>주의: ${data.ratios.caution.toFixed(1)}%</p>
                               <p>경고: ${data.ratios.warning.toFixed(1)}%</p>
                               <p>위험: ${data.ratios.risk.toFixed(1)}%</p>
                               <p>최근 업데이트: ${data.timestamp}</p>
                           </div>
                       `;
                   })
                   .catch(error => {
                       console.error('Error:', error);
                       document.getElementById("status-display").innerHTML =
                           "상태 정보를 불러오지 못했습니다.";
                   });
           });
       });
 
       function getStatusClass(status) {
           const statusClasses = {
               '정상': 'status-normal',
               '주의': 'status-caution',
               '경고': 'status-warning',
               '위험': 'status-danger'
           };
           return statusClasses[status] || 'status-normal';
       }
   </script>
</body>
</html>